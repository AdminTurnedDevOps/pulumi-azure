// *** WARNING: this file was generated by the Pulumi Terraform Bridge (tfgen) Tool. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

package role

import (
	"context"
	"reflect"
	"github.com/pkg/errors"
	"github.com/pulumi/pulumi/sdk/go/pulumi"
)

// Manages a custom Role Definition, used to assign Roles to Users/Principals. See ['Understand role definitions'](https://docs.microsoft.com/en-us/azure/role-based-access-control/role-definitions) in the Azure documentation for more details.
//
// > This content is derived from https://github.com/terraform-providers/terraform-provider-azurerm/blob/master/website/docs/r/role_definition_legacy.html.markdown.
type Definition struct {
	pulumi.CustomResourceState

	// One or more assignable scopes for this Role Definition, such as `/subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333`, `/subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333/resourceGroups/myGroup`, or `/subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333/resourceGroups/myGroup/providers/Microsoft.Compute/virtualMachines/myVM`.
	AssignableScopes pulumi.StringArrayOutput `pulumi:"assignableScopes"`

	// A description of the Role Definition.
	Description pulumi.StringOutput `pulumi:"description"`

	// The name of the Role Definition. Changing this forces a new resource to be created.
	Name pulumi.StringOutput `pulumi:"name"`

	// A `permissions` block as defined below.
	Permissions DefinitionPermissionsArrayOutput `pulumi:"permissions"`

	// A unique UUID/GUID which identifies this role - one will be generated if not specified. Changing this forces a new resource to be created.
	RoleDefinitionId pulumi.StringOutput `pulumi:"roleDefinitionId"`

	// The scope at which the Role Definition applies too, such as `/subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333`, `/subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333/resourceGroups/myGroup`, or `/subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333/resourceGroups/myGroup/providers/Microsoft.Compute/virtualMachines/myVM`. Changing this forces a new resource to be created.
	Scope pulumi.StringOutput `pulumi:"scope"`
}

// NewDefinition registers a new resource with the given unique name, arguments, and options.
func NewDefinition(ctx *pulumi.Context,
	name string, args *DefinitionArgs, opts ...pulumi.ResourceOption) (*Definition, error) {
	if args == nil || args.AssignableScopes == nil {
		return nil, errors.New("missing required argument 'AssignableScopes'")
	}
	if args == nil || args.Permissions == nil {
		return nil, errors.New("missing required argument 'Permissions'")
	}
	if args == nil || args.Scope == nil {
		return nil, errors.New("missing required argument 'Scope'")
	}
	inputs := map[string]pulumi.Input{}
	if args != nil {
		if i := args.AssignableScopes; i != nil { inputs["assignableScopes"] = i.ToStringArrayOutput() }
		if i := args.Description; i != nil { inputs["description"] = i.ToStringOutput() }
		if i := args.Name; i != nil { inputs["name"] = i.ToStringOutput() }
		if i := args.Permissions; i != nil { inputs["permissions"] = i.ToDefinitionPermissionsArrayOutput() }
		if i := args.RoleDefinitionId; i != nil { inputs["roleDefinitionId"] = i.ToStringOutput() }
		if i := args.Scope; i != nil { inputs["scope"] = i.ToStringOutput() }
	}
	var resource Definition
	err := ctx.RegisterResource("azure:role/definition:Definition", name, inputs, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetDefinition gets an existing Definition resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetDefinition(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *DefinitionState, opts ...pulumi.ResourceOption) (*Definition, error) {
	inputs := map[string]pulumi.Input{}
	if state != nil {
		if i := state.AssignableScopes; i != nil { inputs["assignableScopes"] = i.ToStringArrayOutput() }
		if i := state.Description; i != nil { inputs["description"] = i.ToStringOutput() }
		if i := state.Name; i != nil { inputs["name"] = i.ToStringOutput() }
		if i := state.Permissions; i != nil { inputs["permissions"] = i.ToDefinitionPermissionsArrayOutput() }
		if i := state.RoleDefinitionId; i != nil { inputs["roleDefinitionId"] = i.ToStringOutput() }
		if i := state.Scope; i != nil { inputs["scope"] = i.ToStringOutput() }
	}
	var resource Definition
	err := ctx.ReadResource("azure:role/definition:Definition", name, id, inputs, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering Definition resources.
type DefinitionState struct {
	// One or more assignable scopes for this Role Definition, such as `/subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333`, `/subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333/resourceGroups/myGroup`, or `/subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333/resourceGroups/myGroup/providers/Microsoft.Compute/virtualMachines/myVM`.
	AssignableScopes pulumi.StringArrayInput `pulumi:"assignableScopes"`
	// A description of the Role Definition.
	Description pulumi.StringInput `pulumi:"description"`
	// The name of the Role Definition. Changing this forces a new resource to be created.
	Name pulumi.StringInput `pulumi:"name"`
	// A `permissions` block as defined below.
	Permissions DefinitionPermissionsArrayInput `pulumi:"permissions"`
	// A unique UUID/GUID which identifies this role - one will be generated if not specified. Changing this forces a new resource to be created.
	RoleDefinitionId pulumi.StringInput `pulumi:"roleDefinitionId"`
	// The scope at which the Role Definition applies too, such as `/subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333`, `/subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333/resourceGroups/myGroup`, or `/subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333/resourceGroups/myGroup/providers/Microsoft.Compute/virtualMachines/myVM`. Changing this forces a new resource to be created.
	Scope pulumi.StringInput `pulumi:"scope"`
}

// The set of arguments for constructing a Definition resource.
type DefinitionArgs struct {
	// One or more assignable scopes for this Role Definition, such as `/subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333`, `/subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333/resourceGroups/myGroup`, or `/subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333/resourceGroups/myGroup/providers/Microsoft.Compute/virtualMachines/myVM`.
	AssignableScopes pulumi.StringArrayInput `pulumi:"assignableScopes"`
	// A description of the Role Definition.
	Description pulumi.StringInput `pulumi:"description"`
	// The name of the Role Definition. Changing this forces a new resource to be created.
	Name pulumi.StringInput `pulumi:"name"`
	// A `permissions` block as defined below.
	Permissions DefinitionPermissionsArrayInput `pulumi:"permissions"`
	// A unique UUID/GUID which identifies this role - one will be generated if not specified. Changing this forces a new resource to be created.
	RoleDefinitionId pulumi.StringInput `pulumi:"roleDefinitionId"`
	// The scope at which the Role Definition applies too, such as `/subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333`, `/subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333/resourceGroups/myGroup`, or `/subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333/resourceGroups/myGroup/providers/Microsoft.Compute/virtualMachines/myVM`. Changing this forces a new resource to be created.
	Scope pulumi.StringInput `pulumi:"scope"`
}
type DefinitionPermissions struct {
	Actions *[]string `pulumi:"actions"`
	DataActions *[]string `pulumi:"dataActions"`
	NotActions *[]string `pulumi:"notActions"`
	NotDataActions *[]string `pulumi:"notDataActions"`
}
var definitionPermissionsType = reflect.TypeOf((*DefinitionPermissions)(nil)).Elem()

type DefinitionPermissionsInput interface {
	pulumi.Input

	ToDefinitionPermissionsOutput() DefinitionPermissionsOutput
	ToDefinitionPermissionsOutputWithContext(ctx context.Context) DefinitionPermissionsOutput
}

type DefinitionPermissionsArgs struct {
	Actions pulumi.StringArrayInput `pulumi:"actions"`
	DataActions pulumi.StringArrayInput `pulumi:"dataActions"`
	NotActions pulumi.StringArrayInput `pulumi:"notActions"`
	NotDataActions pulumi.StringArrayInput `pulumi:"notDataActions"`
}

func (DefinitionPermissionsArgs) ElementType() reflect.Type {
	return definitionPermissionsType
}

func (a DefinitionPermissionsArgs) ToDefinitionPermissionsOutput() DefinitionPermissionsOutput {
	return pulumi.ToOutput(a).(DefinitionPermissionsOutput)
}

func (a DefinitionPermissionsArgs) ToDefinitionPermissionsOutputWithContext(ctx context.Context) DefinitionPermissionsOutput {
	return pulumi.ToOutputWithContext(ctx, a).(DefinitionPermissionsOutput)
}

type DefinitionPermissionsOutput struct { *pulumi.OutputState }

func (o DefinitionPermissionsOutput) Actions() pulumi.StringArrayOutput {
	return o.Apply(func(v DefinitionPermissions) []string {
		if v.Actions == nil { return *new([]string) } else { return *v.Actions }
	}).(pulumi.StringArrayOutput)
}

func (o DefinitionPermissionsOutput) DataActions() pulumi.StringArrayOutput {
	return o.Apply(func(v DefinitionPermissions) []string {
		if v.DataActions == nil { return *new([]string) } else { return *v.DataActions }
	}).(pulumi.StringArrayOutput)
}

func (o DefinitionPermissionsOutput) NotActions() pulumi.StringArrayOutput {
	return o.Apply(func(v DefinitionPermissions) []string {
		if v.NotActions == nil { return *new([]string) } else { return *v.NotActions }
	}).(pulumi.StringArrayOutput)
}

func (o DefinitionPermissionsOutput) NotDataActions() pulumi.StringArrayOutput {
	return o.Apply(func(v DefinitionPermissions) []string {
		if v.NotDataActions == nil { return *new([]string) } else { return *v.NotDataActions }
	}).(pulumi.StringArrayOutput)
}

func (DefinitionPermissionsOutput) ElementType() reflect.Type {
	return definitionPermissionsType
}

func (o DefinitionPermissionsOutput) ToDefinitionPermissionsOutput() DefinitionPermissionsOutput {
	return o
}

func (o DefinitionPermissionsOutput) ToDefinitionPermissionsOutputWithContext(ctx context.Context) DefinitionPermissionsOutput {
	return o
}

func init() { pulumi.RegisterOutputType(DefinitionPermissionsOutput{}) }

var definitionPermissionsArrayType = reflect.TypeOf((*[]DefinitionPermissions)(nil)).Elem()

type DefinitionPermissionsArrayInput interface {
	pulumi.Input

	ToDefinitionPermissionsArrayOutput() DefinitionPermissionsArrayOutput
	ToDefinitionPermissionsArrayOutputWithContext(ctx context.Context) DefinitionPermissionsArrayOutput
}

type DefinitionPermissionsArrayArgs []DefinitionPermissionsInput

func (DefinitionPermissionsArrayArgs) ElementType() reflect.Type {
	return definitionPermissionsArrayType
}

func (a DefinitionPermissionsArrayArgs) ToDefinitionPermissionsArrayOutput() DefinitionPermissionsArrayOutput {
	return pulumi.ToOutput(a).(DefinitionPermissionsArrayOutput)
}

func (a DefinitionPermissionsArrayArgs) ToDefinitionPermissionsArrayOutputWithContext(ctx context.Context) DefinitionPermissionsArrayOutput {
	return pulumi.ToOutputWithContext(ctx, a).(DefinitionPermissionsArrayOutput)
}

type DefinitionPermissionsArrayOutput struct { *pulumi.OutputState }

func (o DefinitionPermissionsArrayOutput) Index(i pulumi.IntInput) DefinitionPermissionsOutput {
	return pulumi.All(o, i).Apply(func(vs []interface{}) DefinitionPermissions {
		return vs[0].([]DefinitionPermissions)[vs[1].(int)]
	}).(DefinitionPermissionsOutput)
}

func (DefinitionPermissionsArrayOutput) ElementType() reflect.Type {
	return definitionPermissionsArrayType
}

func (o DefinitionPermissionsArrayOutput) ToDefinitionPermissionsArrayOutput() DefinitionPermissionsArrayOutput {
	return o
}

func (o DefinitionPermissionsArrayOutput) ToDefinitionPermissionsArrayOutputWithContext(ctx context.Context) DefinitionPermissionsArrayOutput {
	return o
}

func init() { pulumi.RegisterOutputType(DefinitionPermissionsArrayOutput{}) }

